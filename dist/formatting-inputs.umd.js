(function(h,d){typeof exports=="object"&&typeof module<"u"?d(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],d):(h=typeof globalThis<"u"?globalThis:h||self,d(h.FormattingInputs={},h.React))})(this,function(h,d){"use strict";const D=(e=>e&&typeof e=="object"&&"default"in e?e:{default:e})(d),S=(e,n,r)=>t=>{const o=e.current;o&&n(o,"change"),r&&r(t)},b=(e,n,r)=>t=>{const o=e.current;o&&n(o,"blur"),r&&r(t)},m=" ",k=e=>{const{blocks:n=[],separators:r=[],overflow:t=!1}=e,o=t?0:1;return n.length-o>r.length?[...r,m]:r},y=(e,n,r)=>(r&&(e=e.filter(t=>r.test(t))),e.filter(t=>!(n||[m]).includes(t))),B=(e,n,r,t,o)=>{if(!n||n.length===0)return e.join("");const s=n.map((c,l)=>{var p;const a=e.splice(0,c),u=a.length===c,f=l===n.length-1,i=e.length;if(!f&&i||u&&o&&!f){const L=(p=(r||[])[l])!=null?p:m;a.push(L)}return a.join("")});return t&&e.length&&(s.push((r||[])[n.length]||m),s.push(e.join(""))),s.join("")},E=(e,n,r)=>{var a;const t=(e||"").split(""),o=n.blocks||[],s=k(n),c=y(t,s,n.range);return B(c,o,s,(a=n.overflow)!=null?a:!1,r!=null?r:!1)},v=(e,n)=>{var s,c;const r=((s=n.blocks)!=null?s:[]).reduce((l,a)=>l+a,0),t=new Array((Math.max(((c=n.blocks)!=null?c:[]).length-1),0)).fill("").reduce((l,a,u)=>{var i,g;const f=(g=((i=n.separators)!=null?i:[])[u])!=null?g:m;return l+f.length},0),o=r+t;return e.length>=o},I=(e,n,r,t,o)=>{var s;if(r==="change")return t&&o;if(r==="blur"){const c=((s=n.separators)!=null?s:[m]).includes(e[e.length-1]);return!v(e,n)&&c}return!1},j=(e,n)=>{let r=e;return(t,o)=>{const{value:s,selectionStart:c,selectionEnd:l}=t,a=r.length<s.length,u=s.length===c&&s.length===l,f=I(s,n,o,a,u),i=E(s,n,f);t.value=i,o==="change"&&(u?(t.selectionStart=i.length,t.selectionEnd=i.length):(t.selectionStart=c,t.selectionEnd=l)),r=t.value}},N=({options:e,defaultValue:n,onChange:r,onBlur:t,...o})=>{const s=d.useMemo(()=>E(n?n+"":"",e,!1),[n,e]),c=d.useMemo(()=>j(s,e),[s,e]),l=d.useRef(null);return D.default.createElement("input",{ref:l,defaultValue:s!=null?s:"",onChange:S(l,c,r),onBlur:b(l,c,t),...o})},A=(e,n)=>{const r=n.delimiter||".",t=e.split("").reverse();for(let o=0;o<t.length;o++)if(o<=(n.decimals||0)){const s=t[o];if([",","."].includes(s))return s}return r},P=(e,n,r,t)=>(t?e.replace(/^0+/,"")||"0":e).split("").reverse().reduce((c,l,a)=>{const u=a%3===0&&a>0;return`${l}${u?n:""}${c}`},"")||(r?"0":""),R=(e,n,r)=>{const t=e.substring(0,n);return r?t.padEnd(n,"0"):t},M=(e,n,r)=>{if(e==="")return"";const{separator:t=" ",decimals:o=0,delimiter:s="."}=n,c=A(e,n),l=e.includes(c),[a="",u=""]=e.split(c).map(C=>C.replace(/\D/g,""));if(!l&&a===""&&u==="")return"";const f=r==="blur"&&o>0,i=R(u,o,f),g=o>0&&(l||f);return`${P(a,t,r==="blur"&&g,r==="blur")}${g?s:""}${i}`},_=(e,n,r)=>{const t=A(e,r),o=e.replace(t,"");return e.includes(t)&&o===n},F=(e,n)=>{let r=e;return(t,o)=>{const{value:s,selectionStart:c,selectionEnd:l}=t,a=r.length<s.length,u=s.length===c&&s.length===l,f=_(r,s,n),i=M(s,n,o);t.value=i,o==="change"&&(u?(t.selectionStart=i.length,t.selectionEnd=i.length):a?(t.selectionStart=(c||0)+(i.length-s.length),t.selectionEnd=(l||0)+(i.length-s.length)):f?(t.selectionStart=(c||0)+1,t.selectionEnd=(l||0)+1):(t.selectionStart=c,t.selectionEnd=l)),r=t.value}},$=({options:e,defaultValue:n,onChange:r,onBlur:t,...o})=>{const s=d.useMemo(()=>M(n?n+"":"",e,"blur"),[n,e]),c=d.useMemo(()=>F(s,e),[s,e]),l=d.useRef(null);return D.default.createElement("input",{ref:l,defaultValue:s!=null?s:"",onChange:S(l,c,r),onBlur:b(l,c,t),inputMode:"decimal",style:{textAlign:"right"},...o})};h.BlocksRangeInput=N,h.NumberInput=$,Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
