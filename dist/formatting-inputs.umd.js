(function(h,f){typeof exports=="object"&&typeof module<"u"?f(exports,require("react"),require("react/jsx-runtime")):typeof define=="function"&&define.amd?define(["exports","react","react/jsx-runtime"],f):(h=typeof globalThis<"u"?globalThis:h||self,f(h.FormattingInputs={},h.React,h.jsxRuntime))})(this,function(h,f,S){"use strict";const D=(t,n,r)=>e=>{const o=t.current;o&&n(o,"change"),r&&(console.log({targetValue:e.target.value,currentValue:o==null?void 0:o.value}),r(e))},b=(t,n,r)=>e=>{const o=t.current;o&&n(o,"blur"),r&&r(e)},m=" ",k=t=>{const{blocks:n=[],separators:r=[],overflow:e=!1}=t,o=e?0:1;return n.length-o>r.length?[...r,m]:r},j=(t,n,r)=>(r&&(t=t.filter(e=>r.test(e))),t.filter(e=>!(n||[m]).includes(e))),v=(t,n,r,e,o)=>{if(!n||n.length===0)return t.join("");const s=n.map((c,l)=>{var p;const a=t.splice(0,c),u=a.length===c,d=l===n.length-1,i=t.length;if(!d&&i||u&&o&&!d){const R=(p=(r||[])[l])!=null?p:m;a.push(R)}return a.join("")});return e&&t.length&&(s.push((r||[])[n.length]||m),s.push(t.join(""))),s.join("")},A=(t,n,r)=>{var a;const e=(t||"").split(""),o=n.blocks||[],s=k(n),c=j(e,s,n.range);return v(c,o,s,(a=n.overflow)!=null?a:!1,r!=null?r:!1)},L=(t,n)=>{var s,c;const r=((s=n.blocks)!=null?s:[]).reduce((l,a)=>l+a,0),e=new Array((Math.max(((c=n.blocks)!=null?c:[]).length-1),0)).fill("").reduce((l,a,u)=>{var i,g;const d=(g=((i=n.separators)!=null?i:[])[u])!=null?g:m;return l+d.length},0),o=r+e;return t.length>=o},B=(t,n,r,e,o)=>{var s;if(r==="change")return e&&o;if(r==="blur"){const c=((s=n.separators)!=null?s:[m]).includes(t[t.length-1]);return!L(t,n)&&c}return!1},I=(t,n)=>{let r=t;return(e,o)=>{const{value:s,selectionStart:c,selectionEnd:l}=e,a=r.length<s.length,u=s.length===c&&s.length===l,d=B(s,n,o,a,u),i=A(s,n,d);e.value=i,o==="change"&&(u?(e.selectionStart=i.length,e.selectionEnd=i.length):(e.selectionStart=c,e.selectionEnd=l)),r=e.value}},x=({options:t,defaultValue:n,onChange:r,onBlur:e,...o})=>{const s=f.useMemo(()=>A(n?n+"":"",t,!1),[n,t]),c=f.useMemo(()=>I(s,t),[s,t]),l=f.useRef(null);return S.jsx("input",{ref:l,defaultValue:s!=null?s:"",onChange:D(l,c,r),onBlur:b(l,c,e),...o})},E=(t,n)=>{const r=n.delimiter||".",e=t.split("").reverse();for(let o=0;o<e.length;o++)if(o<=(n.decimals||0)){const s=e[o];if([",","."].includes(s))return s}return r},N=(t,n,r,e)=>(e?t.replace(/^0+/,"")||"0":t).split("").reverse().reduce((c,l,a)=>{const u=a%3===0&&a>0;return`${l}${u?n:""}${c}`},"")||(r?"0":""),P=(t,n,r)=>{const e=t.substring(0,n);return r?e.padEnd(n,"0"):e},M=(t,n,r)=>{if(t==="")return"";const{separator:e=" ",decimals:o=0,delimiter:s="."}=n,c=E(t,n),l=t.includes(c),[a="",u=""]=t.split(c).map(C=>C.replace(/\D/g,""));if(!l&&a===""&&u==="")return"";const d=r==="blur"&&o>0,i=P(u,o,d),g=o>0&&(l||d);return`${N(a,e,r==="blur"&&g,r==="blur")}${g?s:""}${i}`},y=(t,n,r)=>{const e=E(t,r),o=t.replace(e,"");return t.includes(e)&&o===n},F=(t,n)=>{let r=t;return(e,o)=>{const{value:s,selectionStart:c,selectionEnd:l}=e,a=r.length<s.length,u=s.length===c&&s.length===l,d=y(r,s,n),i=M(s,n,o);e.value=i,o==="change"&&(u?(e.selectionStart=i.length,e.selectionEnd=i.length):a?(e.selectionStart=(c||0)+(i.length-s.length),e.selectionEnd=(l||0)+(i.length-s.length)):d?(e.selectionStart=(c||0)+1,e.selectionEnd=(l||0)+1):(e.selectionStart=c,e.selectionEnd=l)),r=e.value}},$=({options:t,defaultValue:n,onChange:r,onBlur:e,...o})=>{const s=f.useMemo(()=>M(n?n+"":"",t,"blur"),[n,t]),c=f.useMemo(()=>F(s,t),[s,t]),l=f.useRef(null);return S.jsx("input",{ref:l,defaultValue:s!=null?s:"",onChange:D(l,c,r),onBlur:b(l,c,e),inputMode:"decimal",style:{textAlign:"right"},...o})};h.BlocksRangeInput=x,h.NumberInput=$,Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
