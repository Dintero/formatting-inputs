(function(m,u){typeof exports=="object"&&typeof module<"u"?u(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],u):(m=typeof globalThis<"u"?globalThis:m||self,u(m.FormattingInputs={},m.React))})(this,function(m,u){"use strict";const D=(t,r,n)=>e=>{const o=t.current;o&&r(o,"change"),n&&n(e)},p=(t,r,n)=>e=>{const o=t.current;o&&r(o,"blur"),n&&n(e)},h=" ",b=t=>{const{blocks:r=[],separators:n=[],overflow:e=!1}=t,o=e?0:1;return r.length-o>n.length?[...n,h]:n},M=(t,r,n)=>(n&&(t=t.filter(e=>n.test(e))),t.filter(e=>!(r||[h]).includes(e))),R=(t,r,n,e,o)=>{if(!r||r.length===0)return t.join("");const s=r.map((c,l)=>{const a=t.splice(0,c),d=a.length===c,f=l===r.length-1,i=t.length;if(!f&&i||d&&o&&!f){const L=(n||[])[l]??h;a.push(L)}return a.join("")});return e&&t.length&&(s.push((n||[])[r.length]||h),s.push(t.join(""))),s.join("")},S=(t,r,n)=>{const e=(t||"").split(""),o=r.blocks||[],s=b(r),c=M(e,s,r.range);return R(c,o,s,r.overflow??!1,n??!1)},I=(t,r)=>{const n=(r.blocks??[]).reduce((s,c)=>s+c,0),e=new Array((Math.max((r.blocks??[]).length-1),0)).fill("").reduce((s,c,l)=>{const a=(r.separators??[])[l]??h;return s+a.length},0),o=n+e;return t.length>=o},T=(t,r,n,e,o)=>{if(n==="change")return e&&o;if(n==="blur"){const s=(r.separators??[h]).includes(t[t.length-1]);return!I(t,r)&&s}return!1},F=(t,r)=>{let n=t;return(e,o)=>{const{value:s,selectionStart:c,selectionEnd:l}=e,a=n.length<s.length,d=s.length===c&&s.length===l,f=T(s,r,o,a,d),i=S(s,r,f);e.value=i,o==="change"&&(d?(e.selectionStart=i.length,e.selectionEnd=i.length):(e.selectionStart=c,e.selectionEnd=l)),n=e.value}},k=({options:t,defaultValue:r,onChange:n,onBlur:e,...o})=>{const s=u.useMemo(()=>S(r?`${r}`:"",t,!1),[r,t]),c=u.useMemo(()=>F(s,t),[s,t]),l=u.useRef(null);return React.createElement("input",{ref:l,defaultValue:s??"",onChange:D(l,c,n),onBlur:p(l,c,e),...o})},A=".",P=" ",B=(t,r,n,e)=>(e?t.replace(/^0+/,"")||"0":t).split("").reverse().reduce((c,l,a)=>{const d=a%3===0&&a>0;return`${l}${d?r:""}${c}`},"")||(n?"0":""),_=(t,r,n)=>{const e=t.substring(0,r);return n?e.padEnd(r,"0"):e},E=(t,r,n)=>{if(t==="")return"";const{delimiter:e=A,separator:o=P,decimals:s=0,padDecimals:c=!1}=r,l=t.includes(e),[a="",d=""]=t.split(e).map(N=>N.replace(/\D/g,""));if(!l&&a===""&&d==="")return"";const f=n==="blur"&&s>0&&c,i=_(d,s,f),g=s>0&&(l||f);return`${B(a,o,n==="blur"&&g,n==="blur")}${g&&!(n==="blur"&&i==="")?e:""}${i}`},C=(t,r,n)=>{const{delimiter:e=A}=n,o=t.replace(e,"");return t.includes(e)&&o===r},$=(t,r)=>{let n=t;return(e,o)=>{const{value:s,selectionStart:c,selectionEnd:l}=e,a=n.length<s.length,d=s.length===c&&s.length===l,f=C(n,s,r),i=E(s,r,o);e.value=i,o==="change"&&(d?(e.selectionStart=i.length,e.selectionEnd=i.length):a?(e.selectionStart=(c||0)+(i.length-s.length),e.selectionEnd=(l||0)+(i.length-s.length)):f?(e.selectionStart=(c||0)+1,e.selectionEnd=(l||0)+1):(e.selectionStart=c,e.selectionEnd=l)),n=e.value}},y=({options:t,defaultValue:r,onChange:n,onBlur:e,...o})=>{const s=u.useMemo(()=>E(r?`${r}`:"",t,"blur"),[r,t]),c=u.useMemo(()=>$(s,t),[s,t]),l=u.useRef(null);return React.createElement("input",{ref:l,defaultValue:s??"",onChange:D(l,c,n),onBlur:p(l,c,e),inputMode:"decimal",style:{textAlign:"right"},...o})};m.BlocksRangeInput=k,m.NumberInput=y,Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})});
