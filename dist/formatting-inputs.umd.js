(function(m,d){typeof exports=="object"&&typeof module<"u"?d(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],d):(m=typeof globalThis<"u"?globalThis:m||self,d(m.FormattingInputs={},m.React))})(this,function(m,d){"use strict";const D=(t,r,n)=>e=>{const o=t.current;o&&r(o,"change"),n&&n(e)},p=(t,r,n)=>e=>{const o=t.current;o&&r(o,"blur"),n&&n(e)},h=" ",b=t=>{const{blocks:r=[],separators:n=[],overflow:e=!1}=t,o=e?0:1;return r.length-o>n.length?[...n,h]:n},M=(t,r,n)=>(n&&(t=t.filter(e=>n.test(e))),t.filter(e=>!(r||[h]).includes(e))),I=(t,r,n,e,o)=>{if(!r||r.length===0)return t.join("");const s=r.map((c,l)=>{const a=t.splice(0,c),u=a.length===c,f=l===r.length-1,i=t.length;if(!f&&i||u&&o&&!f){const L=(n||[])[l]??h;a.push(L)}return a.join("")});return e&&t.length&&(s.push((n||[])[r.length]||h),s.push(t.join(""))),s.join("")},S=(t,r,n)=>{const e=(t||"").split(""),o=r.blocks||[],s=b(r),c=M(e,s,r.range);return I(c,o,s,r.overflow??!1,n??!1)},T=(t,r)=>{const n=(r.blocks??[]).reduce((s,c)=>s+c,0),e=new Array((Math.max((r.blocks??[]).length-1),0)).fill("").reduce((s,c,l)=>{const a=(r.separators??[])[l]??h;return s+a.length},0),o=n+e;return t.length>=o},F=(t,r,n,e,o)=>{if(n==="change")return e&&o;if(n==="blur"){const s=(r.separators??[h]).includes(t[t.length-1]);return!T(t,r)&&s}return!1},k=(t,r)=>{let n=t;return(e,o)=>{const{value:s,selectionStart:c,selectionEnd:l}=e,a=n.length<s.length,u=s.length===c&&s.length===l,f=F(s,r,o,a,u),i=S(s,r,f);e.value=i,o==="change"&&(u?(e.selectionStart=i.length,e.selectionEnd=i.length):(e.selectionStart=c,e.selectionEnd=l)),n=e.value}},P=({options:t,defaultValue:r,onChange:n,onBlur:e,...o})=>{const s=d.useMemo(()=>S(r?r+"":"",t,!1),[r,t]),c=d.useMemo(()=>k(s,t),[s,t]),l=d.useRef(null);return d.createElement("input",{ref:l,defaultValue:s??"",onChange:D(l,c,n),onBlur:p(l,c,e),...o})},A=".",B=" ",_=(t,r,n,e)=>(e?t.replace(/^0+/,"")||"0":t).split("").reverse().reduce((c,l,a)=>{const u=a%3===0&&a>0;return`${l}${u?r:""}${c}`},"")||(n?"0":""),C=(t,r,n)=>{const e=t.substring(0,r);return n?e.padEnd(r,"0"):e},E=(t,r,n)=>{if(t==="")return"";const{delimiter:e=A,separator:o=B,decimals:s=0,padDecimals:c=!1}=r,l=t.includes(e),[a="",u=""]=t.split(e).map(j=>j.replace(/\D/g,""));if(!l&&a===""&&u==="")return"";const f=n==="blur"&&s>0&&c,i=C(u,s,f),g=s>0&&(l||f);return`${_(a,o,n==="blur"&&g,n==="blur")}${g&&!(n==="blur"&&i==="")?e:""}${i}`},R=(t,r,n)=>{const{delimiter:e=A}=n,o=t.replace(e,"");return t.includes(e)&&o===r},y=(t,r)=>{let n=t;return(e,o)=>{const{value:s,selectionStart:c,selectionEnd:l}=e,a=n.length<s.length,u=s.length===c&&s.length===l,f=R(n,s,r),i=E(s,r,o);e.value=i,o==="change"&&(u?(e.selectionStart=i.length,e.selectionEnd=i.length):a?(e.selectionStart=(c||0)+(i.length-s.length),e.selectionEnd=(l||0)+(i.length-s.length)):f?(e.selectionStart=(c||0)+1,e.selectionEnd=(l||0)+1):(e.selectionStart=c,e.selectionEnd=l)),n=e.value}},N=({options:t,defaultValue:r,onChange:n,onBlur:e,...o})=>{const s=d.useMemo(()=>E(r?r+"":"",t,"blur"),[r,t]),c=d.useMemo(()=>y(s,t),[s,t]),l=d.useRef(null);return d.createElement("input",{ref:l,defaultValue:s??"",onChange:D(l,c,n),onBlur:p(l,c,e),inputMode:"decimal",style:{textAlign:"right"},...o})};m.BlocksRangeInput=P,m.NumberInput=N,Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})});
